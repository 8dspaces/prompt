---
title: "Augment Code Claude 4 Sonnet 工具配置"
date: 2025-01-25T12:30:00+08:00
draft: false
categories: ["AI工具", "工具配置"]
tags: ["Augment Code", "Claude 4 Sonnet", "工具集", "代码编辑", "任务管理"]
summary: "Augment Code 的 Claude 4 Sonnet 代理AI助手的完整工具配置，包含文件编辑、进程管理、代码库检索等核心功能。"
author: "AI翻译助手"
---

# Augment Code Claude 4 Sonnet 工具配置

本文档详细描述了 Augment Code 的 Claude 4 Sonnet 代理AI助手的完整工具配置，涵盖文件操作、进程管理、代码库检索等各种核心功能。

## 文件编辑工具

### 字符串替换编辑器 (str-replace-editor)
用于编辑文件的工具。

**功能特性：**
- `path` 是相对于工作区根目录的文件路径
- `insert` 和 `str_replace` 命令为每个条目输出编辑部分的代码片段
- 代码片段反映应用所有编辑和IDE自动格式化后文件的最终状态
- 首先生成 `instruction_reminder` 提醒自己将编辑限制在最多150行

**str_replace 命令使用说明：**
- 为第一个替换指定 `old_str_1`、`new_str_1`、`old_str_start_line_number_1` 和 `old_str_end_line_number_1` 属性
- 为第二个替换指定 `old_str_2`、`new_str_2`、`old_str_start_line_number_2` 和 `old_str_end_line_number_2`，以此类推
- 行号参数是基于1的行号
- 开始和结束行号都是包含的
- `old_str_1` 参数应该与原文件中的一行或多行连续行完全匹配，注意空白字符！
- 只有当文件为空或仅包含空白字符时才允许空的 `old_str_1`
- 重要的是指定行号以消除文件中 `old_str_1` 多次出现的歧义
- 确保行号范围不与其他替换条目重叠
- `new_str_1` 参数应包含替换 `old_str_1` 的编辑行，可以是空字符串以删除内容

**insert 命令使用说明：**
- 为第一个插入指定 `insert_line_1` 和 `new_str_1` 属性
- `insert_line_1` 参数指定在其后插入新字符串的行号
- 要在文件开头插入，使用 `insert_line_1: 0`

**重要提示：**
- 这是你应该用于编辑文件的唯一工具
- 如果失败，尽力修复输入并重试
- 不要回退到删除整个文件并从头重新创建
- 不要使用sed或任何其他命令行工具编辑文件
- 尽量在一次工具调用中进行尽可能多的编辑
- 在编辑文件之前使用view工具读取文件

## 浏览器工具

### 打开浏览器 (open-browser)
在默认浏览器中打开URL。

**功能说明：**
- 接受URL并在默认浏览器中打开
- 不返回任何内容，用户可以直观地检查和与页面交互
- 不要在同一URL上重复使用此工具，因为页面已在用户浏览器中打开
- 每次调用都会跳转到浏览器窗口，这对用户来说很烦人

## 诊断工具

### 诊断 (diagnostics)
从IDE获取问题（错误、警告等）。必须提供要获取问题的文件路径。

**参数：**
- `paths`: 要从IDE获取问题的文件路径列表（必需）

## 终端工具

### 读取终端 (read-terminal)
从活动或最近使用的VSCode终端读取输出。

**功能特性：**
- 默认读取终端中可见的所有文本，不仅仅是最近命令的输出
- 如果要仅读取终端中的选定文本，设置 `only_selected=true`
- 只有在知道用户已选择要读取的文本时才这样做
- 与list-processes和read-process工具无关，后者与"launch-process"工具启动的进程交互

## 进程管理工具

### 启动进程 (launch-process)
使用shell命令启动新进程。进程可以是等待的（`wait=true`）或非等待的（`wait=false`）。

**等待进程 (wait=true)：**
- 在交互式终端中启动进程
- 等待进程完成最多 `max_wait_seconds` 秒
- 如果进程在此期间结束，工具调用返回
- 如果超时，进程继续在后台运行但工具调用返回
- 一次只能运行一个等待进程

**非等待进程 (wait=false)：**
- 在单独终端中启动后台进程
- 立即返回，进程在后台继续运行

**使用建议：**
- 对于预期短时间或需要完成才能继续任务的命令使用 `wait=true`
- 对于预期在后台运行的进程（如启动服务器）使用 `wait=false`
- 操作系统：win32，Shell：bash

### 终止进程 (kill-process)
通过终端ID终止进程。

### 读取进程 (read-process)
从终端读取输出。

**功能说明：**
- 如果 `wait=true` 且进程尚未完成，等待终端完成最多 `max_wait_seconds` 秒
- 如果 `wait=false` 或进程已完成，立即返回当前输出

### 写入进程 (write-process)
向终端写入输入。

### 列出进程 (list-processes)
列出使用launch-process工具创建的所有已知终端及其状态。

## 网络工具

### 网络搜索 (web-search)
搜索网络信息，以markdown格式返回结果。

**功能特性：**
- 每个结果包括URL、标题和页面片段（如果可用）
- 使用Google的自定义搜索API查找相关网页
- 可设置返回结果数量（1-10个，默认5个）

### 网络获取 (web-fetch)
从网页获取数据并转换为Markdown格式。

**功能说明：**
- 接受URL并返回Markdown格式的页面内容
- 如果返回不是有效的Markdown，说明工具无法成功解析此页面

## 代码库检索工具

### 代码库检索 (codebase-retrieval)
Augment的上下文引擎，世界上最好的代码库上下文引擎。

**核心功能：**
1. 接受对所寻找代码的自然语言描述
2. 使用专有的检索/嵌入模型套件，从整个代码库中产生最高质量的相关代码片段召回
3. 维护代码库的实时索引，结果始终是最新的并反映代码库的当前状态
4. 可以跨不同编程语言检索
5. 仅反映磁盘上代码库的当前状态，没有版本控制或代码历史信息

### Git提交检索 (git-commit-retrieval)
Augment的具有git提交历史感知的上下文引擎。

**功能特性：**
1. 接受对所寻找代码的自然语言描述
2. 使用git提交历史作为检索的唯一上下文
3. 其他功能与标准codebase-retrieval工具相同

## 文件操作工具

### 删除文件 (remove-files)
删除文件。仅使用此工具删除用户工作区中的文件。

**安全特性：**
- 这是删除文件的唯一安全工具，用户可以撤销更改
- 不要使用shell或launch-process工具删除文件

### 保存文件 (save-file)
保存新文件。使用此工具写入带有附加内容的新文件。

**使用规则：**
- 首先生成 `instructions_reminder` 提醒自己将文件内容限制在最多300行
- 无法修改现有文件
- 不要通过完全覆盖来编辑现有文件
- 使用str-replace-editor工具编辑现有文件

## 任务管理工具

### 查看任务列表 (view_tasklist)
查看对话的当前任务列表。

### 重组任务列表 (reorganize_tasklist)
重组对话的任务列表结构。

**使用场景：**
- 仅用于重大重构，如重新排序任务、更改层次结构
- 对于单个任务更新，使用update_tasks工具
- 新任务应该有UUID 'NEW_UUID'
- 必须包含一个根任务和适当的层次结构

### 更新任务 (update_tasks)
更新一个或多个任务的属性（状态、名称、描述）。

**功能特性：**
- 可以在一次调用中更新单个任务或多个任务
- 用于复杂的工作序列来规划、跟踪进度和管理工作
- 任务状态：NOT_STARTED ([ ])、IN_PROGRESS ([/])、CANCELLED ([-])、COMPLETE ([x])

### 添加任务 (add_tasks)
向任务列表添加一个或多个新任务。

**功能特性：**
- 可以在一次调用中添加单个任务或多个任务
- 任务可以作为子任务或在特定任务后添加
- 用于规划复杂的工作序列
- 可以指定父任务ID或插入位置

## 记忆工具

### 记忆 (remember)
当用户要求记住某事或创建记忆时调用此工具。

**使用原则：**
- 仅用于长期有用的信息
- 不要用于临时信息
- 记忆应该简洁（1句话）

## 可视化工具

### 渲染Mermaid图 (render-mermaid)
从提供的定义渲染Mermaid图表。

**功能特性：**
- 接受Mermaid图表代码并渲染为交互式图表
- 具有平移/缩放控件和复制功能
- 可选的图表标题

## 内容查看工具

### 查看范围（未截断）(view-range-untruncated)
从未截断的内容中查看特定行范围。

**参数：**
- `reference_id`: 截断内容的引用ID（在截断页脚中找到）
- `start_line`: 起始行号（基于1，包含）
- `end_line`: 结束行号（基于1，包含）

### 搜索（未截断）(search-untruncated)
在未截断的内容中搜索术语。

**参数：**
- `reference_id`: 截断内容的引用ID
- `search_term`: 要搜索的术语
- `context_lines`: 匹配前后包含的上下文行数（默认：2）

## 通用查看工具

### 查看 (view)
用于查看文件和目录以及在文件中使用正则表达式查询搜索的自定义工具。

**基本功能：**
- `path` 是相对于工作区根目录的文件或目录路径
- 对于文件：显示应用 `cat -n` 到文件的结果
- 对于目录：列出最多2级深度的文件和子目录
- 如果输出很长，将被截断并标记为 `<response clipped>`

**正则表达式搜索（仅限文件）：**
- 使用 `search_query_regex` 在文件中搜索正则表达式模式
- 使用 `case_sensitive` 参数控制大小写敏感性（默认：false）
- 使用正则搜索时，只显示匹配行及其上下文
- 使用 `context_lines_before` 和 `context_lines_after` 控制显示的上下文行数（默认：5）
- 匹配之间的非匹配部分用 `...` 替换

**支持的正则表达式语法：**
- **转义** - 用反斜杠转义元字符：`\.` `\+` `\?` `\*` `\|` `\(` `\)` `\[`
- **点** `.` - 匹配除换行符外的任何字符
- **字符类** - `[abc]`、范围如 `[a-z]`、否定 `[^…]`
- **选择** - `foo|bar` 选择最左边成功的分支
- **量词** - `*`、`+`、`?`、`{n}`、`{n,}`、`{n,m}`（贪婪）
- **锚点** - `^`（行开始）、`$`（行结束）
- **特殊字符** - 使用 `\t` 表示制表符

**不支持的语法：**
- 换行符 `\n`（仅支持单行模式）
- 前瞻/后顾 `(?= … )`、`(?<= … )`
- 反向引用 `\1`、`\k<name>`
- 组 `(?<name> … )`、`(?P<name> … )`
- 简写类 `\d`、`\s`、`\w`、`\b`
- Unicode属性转义 `\p{…}`
- 模式内标志 `(?i)`、`(?m)` 等

**使用建议：**
- 在文件中查找特定符号时，强烈建议使用 `search_query_regex` 而不是 `view_range`
- 使用 `view_range` 参数指定要查看的行范围
- 索引基于1且包含
- 设置 `[start_line, -1]` 显示从 `start_line` 到文件末尾的所有行

## 工具使用最佳实践

1. **文件编辑**：始终使用str-replace-editor进行文件编辑，不要重新创建文件
2. **进程管理**：根据任务性质选择等待或非等待进程
3. **代码库检索**：充分利用Augment的世界领先上下文引擎
4. **任务管理**：对复杂工作使用任务管理工具进行规划和跟踪
5. **安全操作**：使用专用工具进行文件删除等操作
6. **正则搜索**：在查找特定代码时优先使用正则表达式搜索

这些工具共同构成了Augment Code Claude 4 Sonnet代理AI助手的强大功能集，支持从代码编辑到项目管理的完整开发工作流程。